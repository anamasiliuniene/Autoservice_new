{% extends "autoservice/base.html" %}
{% block title %}Pick Service{% endblock %}

{% block content %}
<div class="container mt-4">

    <h2 class="mb-4">Pick Service</h2>

    <table class="table table-hover">
        <thead class="table-dark">
            <tr>
                <th>Service</th>
                <th>Description</th>
                <th class="text-end">Price (€)</th>
                {% if order_pk %}
                <th class="text-center">Quantity</th>
                <th></th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for service in services %}
            <tr>
                <td>{{ service.name }}</td>
                <td>{{ service.description }}</td>
                <td class="text-end">{{ service.price }}</td>

                {% if order_pk %}
                <td class="text-center" style="max-width: 80px;">
                    <form method="post" action="{% url 'add_service_to_order' order_pk=order_pk service_pk=service.pk %}">
                        {% csrf_token %}
                        <input type="number" name="quantity" value="1" min="1" class="form-control form-control-sm">
                </td>
                <td class="text-end">
                        <button type="submit" class="btn btn-sm btn-success">Add</button>
                    </form>
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{% if order_pk %}5{% else %}3{% endif %}" class="text-center text-muted">
                    No services available
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="mt-3">
        <a href="{% url 'order_update' pk=order_pk %}" class="btn btn-outline-secondary">
            ← Back to Order
        </a>
    </div>

</div>
{% endblock %}