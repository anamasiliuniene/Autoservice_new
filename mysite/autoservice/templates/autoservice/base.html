{% load static %}
<link href="{% static 'css/css' %}" rel="stylesheet">
<!DOCTYPE html>
<html lang="en">
<head>
    <title>The Grease Monkey</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Open+Sans:wght@400;600&display=swap"
          rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

</head>
<body>

<!-- Hero Section -->
<div class="p-3 bg-dark text-white text-center hero-small">
    <img src="{% static 'images/logo.png' %}"
         alt="The Grease Monkey Logo"
         class="img-fluid rounded-circle mb-3 logo-glow"
         style="max-height: 120px;">
    <h1 class="display-5 text-light">The Grease Monkey</h1>
    <p class="lead mb-0">We Keep You Rolling!</p>
</div>


<nav class="navbar navbar-expand-lg navbar-warning bg-warning">
  <div class="container-fluid">

<!-- TOGGLER + SEARCH ICON: right side on small screens -->
<div class="d-flex ms-auto align-items-center">
  <!-- Search icon -->
  <a href="#" onclick="document.getElementById('mobileSearch').classList.toggle('d-none'); return false;" class="text-dark me-2">
    <i class="bi bi-search" style="font-size: 1.2rem;"></i>
  </a>

  <!-- Toggler button -->
  <button class="navbar-toggler p-1" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" style="font-size: 0.8rem;">
    <span class="navbar-toggler-icon"></span>
  </button>
</div>

<!-- Hidden mobile search input (appears when icon clicked) -->
<form id="mobileSearch" class="d-none my-2 me-3" role="search" method="get" action="{% url 'search' %}">
  <input class="form-control form-control-sm" type="text" name="query" placeholder="Search" autocomplete="off" value="{{ query|default:'' }}">
</form>

    <!-- COLLAPSIBLE CONTENT -->
    <div class="collapse navbar-collapse" id="mainNavbar">

      <!-- LEFT NAV + AUTH -->
      <ul class="navbar-nav me-auto align-items-center">

        <!-- Main links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'index' %}"><i class="bi bi-bar-chart-fill me-1"></i> STATS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'cars' %}"><i class="bi bi-car-front-fill me-1"></i> CARS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'orders' %}"><i class="bi bi-tools me-1"></i> ORDERS</a>
        </li>
      </ul>

 <!-- User info / login/logout -->
        {% if user.is_authenticated %}
        <li class="nav-item">
          <span class="nav-link"><i class="bi bi-person-circle"></i> {{ user.username }}</span>
        </li>
        <li class="nav-item">
          <form method="post" action="{% url 'logout' %}" class="d-inline ms-2">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-dark btn-sm">Logout</button>
          </form>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="btn btn-outline-dark btn-sm ms-2" href="{% url 'login' %}">Login</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<script>
function toggleSearch() {
  const input = document.getElementById('searchInput');
  input.classList.toggle('d-none');
  if (!input.classList.contains('d-none')) input.focus();
}
</script>

<!-- Main Content -->
<div class="container mt-5">
    {% block content %}
    {% endblock %}
</div>

<!-- Footer -->
<footer class="mt-5 p-4 bg-dark text-white text-center">
    <p>{% now 'Y' %} Â© The Grease Monkey</p>
</footer>

</body>
</html>